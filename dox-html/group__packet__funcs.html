<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>cif-api: Functions for manipulating packets</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="dox.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Functions for manipulating packets</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__packet__funcs.html#ga5df43e798d3cefcd2ce070f9e5ad9b8e">cif_packet_create</a> (<a class="el" href="group__datatypes.html#ga1a9b0b1f2abee085ee5d32eb388f2d60">cif_packet_tp</a> **packet, UChar *names[])</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Creates a new packet for the given item names.  <a href="#ga5df43e798d3cefcd2ce070f9e5ad9b8e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__packet__funcs.html#ga39bab0d371cdaad3e990a7b249e16baa">cif_packet_get_names</a> (<a class="el" href="group__datatypes.html#ga1a9b0b1f2abee085ee5d32eb388f2d60">cif_packet_tp</a> *packet, const UChar ***names)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Retrieves the names of all the items in the current packet.  <a href="#ga39bab0d371cdaad3e990a7b249e16baa"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__packet__funcs.html#ga815ebeaa83d09ce9c9fcb3981de4598d">cif_packet_set_item</a> (<a class="el" href="group__datatypes.html#ga1a9b0b1f2abee085ee5d32eb388f2d60">cif_packet_tp</a> *packet, const UChar *name, <a class="el" href="group__datatypes.html#gaf5c256b25e639154880eea5cb183b080">cif_value_tp</a> *value)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets the value of the specified CIF item in the specified packet, including if the packet did not previously provide any value for the specified data name.  <a href="#ga815ebeaa83d09ce9c9fcb3981de4598d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__packet__funcs.html#ga3456a59926385cbe0153d423babfb87a">cif_packet_get_item</a> (<a class="el" href="group__datatypes.html#ga1a9b0b1f2abee085ee5d32eb388f2d60">cif_packet_tp</a> *packet, const UChar *name, <a class="el" href="group__datatypes.html#gaf5c256b25e639154880eea5cb183b080">cif_value_tp</a> **value)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Determines whether a packet contains a value for a specified data name, and optionally provides that value.  <a href="#ga3456a59926385cbe0153d423babfb87a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__packet__funcs.html#ga52927d8071f011e63a4726030b472926">cif_packet_remove_item</a> (<a class="el" href="group__datatypes.html#ga1a9b0b1f2abee085ee5d32eb388f2d60">cif_packet_tp</a> *packet, const UChar *name, <a class="el" href="group__datatypes.html#gaf5c256b25e639154880eea5cb183b080">cif_value_tp</a> **value)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Removes the value, if any, associated with the specified name in the specified packet, optionally returning it to the caller.  <a href="#ga52927d8071f011e63a4726030b472926"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__packet__funcs.html#ga4eda991e3e42ef96267e638110dabab3">cif_packet_free</a> (<a class="el" href="group__datatypes.html#ga1a9b0b1f2abee085ee5d32eb388f2d60">cif_packet_tp</a> *packet)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Releases the specified packet and all resources associated with it, including those associated with any values within.  <a href="#ga4eda991e3e42ef96267e638110dabab3"></a><br/></td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga5df43e798d3cefcd2ce070f9e5ad9b8e"></a><!-- doxytag: member="cif.h::cif_packet_create" ref="ga5df43e798d3cefcd2ce070f9e5ad9b8e" args="(cif_packet_tp **packet, UChar *names[])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cif_packet_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__datatypes.html#ga1a9b0b1f2abee085ee5d32eb388f2d60">cif_packet_tp</a> **&nbsp;</td>
          <td class="paramname"> <em>packet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">UChar *&nbsp;</td>
          <td class="paramname"> <em>names</em>[]</td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Creates a new packet for the given item names. </p>
<p>The resulting packet does not retain any references to the item name strings provided by the caller. It will contain for each data name a value object representing the explicit "unknown" value. The caller is responsible for freeing the packet via <code><a class="el" href="group__packet__funcs.html#ga4eda991e3e42ef96267e638110dabab3" title="Releases the specified packet and all resources associated with it, including those...">cif_packet_free()</a></code> when it is no longer needed.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in,out]</tt>&nbsp;</td><td valign="top"><em>packet</em>&nbsp;</td><td>the location were the address of the new packet should be recorded. Must not be NULL. The value initially at <code>*packet</code> is ignored.</td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>names</em>&nbsp;</td><td>a pointer to a NULL-terminated array of Unicode string pointers, each element containing one data name to be represented in the new packet; may contain zero names. The responsibility for these resources is not transferred. May be NULL, which is equivalent to containing zero names.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Returns <code>CIF_OK</code> on success, or else an error code characterizing the nature of the failure, normally one of: <ul>
<li><code>CIF_INVALID_ITEMNAME</code> if one of the provided strings is not a valid CIF data name </li>
<li><code>CIF_ERROR</code> in most other cases </li>
</ul>
</dd></dl>

</div>
</div>
<a class="anchor" id="ga4eda991e3e42ef96267e638110dabab3"></a><!-- doxytag: member="cif.h::cif_packet_free" ref="ga4eda991e3e42ef96267e638110dabab3" args="(cif_packet_tp *packet)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cif_packet_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__datatypes.html#ga1a9b0b1f2abee085ee5d32eb388f2d60">cif_packet_tp</a> *&nbsp;</td>
          <td class="paramname"> <em>packet</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Releases the specified packet and all resources associated with it, including those associated with any values within. </p>
<p>This function is a safe no-op when the argument is NULL.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>packet</em>&nbsp;</td><td>a pointer to the packet to free </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga3456a59926385cbe0153d423babfb87a"></a><!-- doxytag: member="cif.h::cif_packet_get_item" ref="ga3456a59926385cbe0153d423babfb87a" args="(cif_packet_tp *packet, const UChar *name, cif_value_tp **value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cif_packet_get_item </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__datatypes.html#ga1a9b0b1f2abee085ee5d32eb388f2d60">cif_packet_tp</a> *&nbsp;</td>
          <td class="paramname"> <em>packet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const UChar *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__datatypes.html#gaf5c256b25e639154880eea5cb183b080">cif_value_tp</a> **&nbsp;</td>
          <td class="paramname"> <em>value</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Determines whether a packet contains a value for a specified data name, and optionally provides that value. </p>
<p>The value, if any, is returned via parameter <code>value</code>, provided that that parameter is not NULL. In contrast to <code><a class="el" href="group__packet__funcs.html#ga815ebeaa83d09ce9c9fcb3981de4598d" title="Sets the value of the specified CIF item in the specified packet, including if the...">cif_packet_set_item()</a></code>, the value is not copied out; rather a pointer to the packet's own internal object is provided. Therefore, callers must not free the value object themselves, but they may freely <em>modify</em> it, and such modifications will subsequently be visible via the packet.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>packet</em>&nbsp;</td><td>a pointer to the packet object from which to retrieve a value</td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>name</em>&nbsp;</td><td>the data name requested from the packet</td></tr>
    <tr><td valign="top"><tt>[in,out]</tt>&nbsp;</td><td valign="top"><em>value</em>&nbsp;</td><td>if not NULL, gives the location where a pointer to the requested value should be written.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Returns <code>CIF_OK</code> if the packet contains an item having the specified data name, or <code>CIF_NOSUCH_ITEM</code> otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="ga39bab0d371cdaad3e990a7b249e16baa"></a><!-- doxytag: member="cif.h::cif_packet_get_names" ref="ga39bab0d371cdaad3e990a7b249e16baa" args="(cif_packet_tp *packet, const UChar ***names)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cif_packet_get_names </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__datatypes.html#ga1a9b0b1f2abee085ee5d32eb388f2d60">cif_packet_tp</a> *&nbsp;</td>
          <td class="paramname"> <em>packet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const UChar ***&nbsp;</td>
          <td class="paramname"> <em>names</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Retrieves the names of all the items in the current packet. </p>
<p>It is the caller's responsibility to release the resulting array, but its elements <b>MUST</b> <b>NOT</b> be modified or freed. Names are initially in the order in which they appear in the array passed to <code>cif_packate_create()</code>. If a <em>new</em> item is added via <code><a class="el" href="group__packet__funcs.html#ga815ebeaa83d09ce9c9fcb3981de4598d" title="Sets the value of the specified CIF item in the specified packet, including if the...">cif_packet_set_item()</a></code> then its name is appended to the packet's name list.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>packet</em>&nbsp;</td><td>a pointer to the packet whose data names are requested</td></tr>
    <tr><td valign="top"><tt>[in,out]</tt>&nbsp;</td><td valign="top"><em>names</em>&nbsp;</td><td>the location where a pointer to the array of names should be written. The array will be NULL-terminated.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Returns <code>CIF_OK</code> on success, or an error code (typically <code>CIF_ERROR</code> ) on failure </dd></dl>

</div>
</div>
<a class="anchor" id="ga52927d8071f011e63a4726030b472926"></a><!-- doxytag: member="cif.h::cif_packet_remove_item" ref="ga52927d8071f011e63a4726030b472926" args="(cif_packet_tp *packet, const UChar *name, cif_value_tp **value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cif_packet_remove_item </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__datatypes.html#ga1a9b0b1f2abee085ee5d32eb388f2d60">cif_packet_tp</a> *&nbsp;</td>
          <td class="paramname"> <em>packet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const UChar *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__datatypes.html#gaf5c256b25e639154880eea5cb183b080">cif_value_tp</a> **&nbsp;</td>
          <td class="paramname"> <em>value</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Removes the value, if any, associated with the specified name in the specified packet, optionally returning it to the caller. </p>
<p>The value object is returned via the <code>value</code> parameter if that is not NULL, in which case the caller assumes responsibility for the value. Otherwise the removed value and all resources belonging to it are released.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in,out]</tt>&nbsp;</td><td valign="top"><em>packet</em>&nbsp;</td><td>a pointer to the packet from which to remove an item.</td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>name</em>&nbsp;</td><td>the name of the item to remove, as a NUL-terminated Unicode string.</td></tr>
    <tr><td valign="top"><tt>[in,out]</tt>&nbsp;</td><td valign="top"><em>value</em>&nbsp;</td><td>if not NULL, the location where a pointer to the removed item should be written</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Returns <code>CIF_OK</code> if the packet initially contained an item having the given name, or <code>CIF_NOSUCH_ITEM</code> otherwise; the case where the given name is not a valid CIF item name is not distinguished as a separate case. </dd></dl>

</div>
</div>
<a class="anchor" id="ga815ebeaa83d09ce9c9fcb3981de4598d"></a><!-- doxytag: member="cif.h::cif_packet_set_item" ref="ga815ebeaa83d09ce9c9fcb3981de4598d" args="(cif_packet_tp *packet, const UChar *name, cif_value_tp *value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cif_packet_set_item </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__datatypes.html#ga1a9b0b1f2abee085ee5d32eb388f2d60">cif_packet_tp</a> *&nbsp;</td>
          <td class="paramname"> <em>packet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const UChar *&nbsp;</td>
          <td class="paramname"> <em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__datatypes.html#gaf5c256b25e639154880eea5cb183b080">cif_value_tp</a> *&nbsp;</td>
          <td class="paramname"> <em>value</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets the value of the specified CIF item in the specified packet, including if the packet did not previously provide any value for the specified data name. </p>
<p>The provided value object is copied into the packet; the packet does not assume responsibility for either the specified value object or the specified name. If the value handle is <code>NULL</code> then an explicit unknown-value object is recorded. The copied (or created) value can subsequently be obtained via <code><a class="el" href="group__packet__funcs.html#ga3456a59926385cbe0153d423babfb87a" title="Determines whether a packet contains a value for a specified data name, and optionally...">cif_packet_get_item()</a></code>.</p>
<p>When the specified name matches an item already present in the packet, the existing value is first cleaned as if by <code><a class="el" href="group__value__funcs.html#gac6eb6d7ad6225498e56c89ee225c2c46" title="Frees any resources associated with the provided value object without freeing the...">cif_value_clean()</a></code>, then the new value is copied onto it. That will be visible to code that holds a reference to the value (obtained via <code><a class="el" href="group__packet__funcs.html#ga3456a59926385cbe0153d423babfb87a" title="Determines whether a packet contains a value for a specified data name, and optionally...">cif_packet_get_item()</a></code>). Exception: if <code>value</code> is the same object as the current internal one for the given name then this function succeeds without changing anything.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in,out]</tt>&nbsp;</td><td valign="top"><em>packet</em>&nbsp;</td><td>a pointer to the packet to modify</td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>name</em>&nbsp;</td><td>the name of the item within the packet to modify, as a NUL-terminated Unicode string; must be non-null and valid for a CIF data name</td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>value</em>&nbsp;</td><td>the value object to copy into the packet, or <code>NULL</code> for an unknown-value value object to be added</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Returns <code>CIF_OK</code> on success, or else an error code characterizing the nature of the failure, normally one of: <ul>
<li><code>CIF_INVALID_ITEMNAME</code> if <code>name</code> is not a valid CIF data name </li>
<li><code>CIF_ERROR</code> in most other cases </li>
</ul>
</dd></dl>

</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr/>
<p style="font-size: small">Copyright 2014, 2015 John C. Bollinger</p>

