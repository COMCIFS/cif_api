<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>cif-api: Functions for (loop) packet iteration</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="dox.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Functions for (loop) packet iteration</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pktitr__funcs.html#gac1e81229999fe79c718d9c82b2f27123">cif_pktitr_close</a> (<a class="el" href="group__datatypes.html#gaf30f6ef79093de027175258a818c178c">cif_pktitr_tp</a> *iterator)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Finalizes any changes applied via the specified iterator and releases any resources associated with it. The iterator ceases to be active.  <a href="#gac1e81229999fe79c718d9c82b2f27123"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pktitr__funcs.html#ga9eb5e98ce0d242782160967a07277041">cif_pktitr_abort</a> (<a class="el" href="group__datatypes.html#gaf30f6ef79093de027175258a818c178c">cif_pktitr_tp</a> *iterator)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">If possible, reverts any changes applied via the provided iterator to its CIF, and, in all cases, releases any resources associated with the iterator itself.  <a href="#ga9eb5e98ce0d242782160967a07277041"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pktitr__funcs.html#gad59958923b9731f89c635de17e19afea">cif_pktitr_next_packet</a> (<a class="el" href="group__datatypes.html#gaf30f6ef79093de027175258a818c178c">cif_pktitr_tp</a> *iterator, <a class="el" href="group__datatypes.html#ga1a9b0b1f2abee085ee5d32eb388f2d60">cif_packet_tp</a> **packet)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Advances a packet iterator to the next packet, if any, and optionally returns the contents of that packet.  <a href="#gad59958923b9731f89c635de17e19afea"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pktitr__funcs.html#ga0deabdbb4e3117170d3a7885bd0219f8">cif_pktitr_update_packet</a> (<a class="el" href="group__datatypes.html#gaf30f6ef79093de027175258a818c178c">cif_pktitr_tp</a> *iterator, <a class="el" href="group__datatypes.html#ga1a9b0b1f2abee085ee5d32eb388f2d60">cif_packet_tp</a> *packet)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Updates the last packet iterated by the specified iterator with the values from the provided packet.  <a href="#ga0deabdbb4e3117170d3a7885bd0219f8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__pktitr__funcs.html#ga0bb801812ca029b5e8b0694b6a3c57ed">cif_pktitr_remove_packet</a> (<a class="el" href="group__datatypes.html#gaf30f6ef79093de027175258a818c178c">cif_pktitr_tp</a> *iterator)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Removes the last packet iterated by the specified iterator from its managed loop.  <a href="#ga0bb801812ca029b5e8b0694b6a3c57ed"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>A packet iterator, obtained via <code><a class="el" href="group__loop__funcs.html#gaaa75132e7ed5357aee886c1cd01a1af4" title="Creates an iterator over the packets in the specified loop.">cif_loop_get_packets()</a></code>, represents the current state of a particular iteration of the packets of a particular loop (of a particular container). Based on that state, the user controls the progression of the iteration and optionally accesses the data and / or modifies the underlying loop.</p>
<p>The life cycle of an iterator contains several states: </p>
<ul>
<li><b>NEW</b> - The initial state of every iterator. An iterator remains in this state until it is destroyed via <code><a class="el" href="group__pktitr__funcs.html#gac1e81229999fe79c718d9c82b2f27123" title="Finalizes any changes applied via the specified iterator and releases any resources...">cif_pktitr_close()</a></code> or <code><a class="el" href="group__pktitr__funcs.html#ga9eb5e98ce0d242782160967a07277041" title="If possible, reverts any changes applied via the provided iterator to its CIF, and...">cif_pktitr_abort()</a></code>, or it is moved to the <b>ITERATED</b> state (or, under special circumstances, directly to the <b>FINISHED</b> state; see below) via <code><a class="el" href="group__pktitr__funcs.html#gad59958923b9731f89c635de17e19afea" title="Advances a packet iterator to the next packet, if any, and optionally returns the...">cif_pktitr_next_packet()</a></code>; no other operations are valid for a packet iterator in this state. </li>
<li><b>ITERATED</b> - The state of an iterator that has a valid previous packet. An iterator enters this state via <code><a class="el" href="group__pktitr__funcs.html#gad59958923b9731f89c635de17e19afea" title="Advances a packet iterator to the next packet, if any, and optionally returns the...">cif_pktitr_next_packet()</a></code> (when that function returns <code>CIF_OK</code>), and leaves it via <code><a class="el" href="group__pktitr__funcs.html#ga0bb801812ca029b5e8b0694b6a3c57ed" title="Removes the last packet iterated by the specified iterator from its managed loop...">cif_pktitr_remove_packet()</a></code> [to the <b>REMOVED</b> state] or via <code><a class="el" href="group__pktitr__funcs.html#gad59958923b9731f89c635de17e19afea" title="Advances a packet iterator to the next packet, if any, and optionally returns the...">cif_pktitr_next_packet()</a></code> [to the <b>FINISHED</b> state] when that function returns <code>CIF_FINISHED</code>. All packet iterator functions are valid for an iterator in this state; some leave it in this state. </li>
<li><b>REMOVED</b> - The state of an iterator after its most recently iterated packet is removed via <code><a class="el" href="group__pktitr__funcs.html#ga0bb801812ca029b5e8b0694b6a3c57ed" title="Removes the last packet iterated by the specified iterator from its managed loop...">cif_pktitr_remove_packet()</a></code>. From a forward-looking perspective, this state is nearly equivalent to the <b>NEW</b> state; the primary difference is that it is not extraordinary for an iterator to proceed directly from this state to the <b>FINISHED</b> state. </li>
<li><b>FINISHED</b> - The state of an iterator after <code><a class="el" href="group__pktitr__funcs.html#gad59958923b9731f89c635de17e19afea" title="Advances a packet iterator to the next packet, if any, and optionally returns the...">cif_pktitr_next_packet()</a></code> returns <code>CIF_FINISHED</code> to signal that no more packets are available. The only valid operations on such an iterator are to destroy it via <code><a class="el" href="group__pktitr__funcs.html#gac1e81229999fe79c718d9c82b2f27123" title="Finalizes any changes applied via the specified iterator and releases any resources...">cif_pktitr_close()</a></code> or <code><a class="el" href="group__pktitr__funcs.html#ga9eb5e98ce0d242782160967a07277041" title="If possible, reverts any changes applied via the provided iterator to its CIF, and...">cif_pktitr_abort()</a></code>, and one of those operations should be performed in a timely manner.</li>
</ul>
<p>The CIF data model does not accommodate loops without any packets, but the CIF API definition requires such loops to be accommodated in memory, at least transiently. It is for such packetless loops alone that a packet iterator can proceed directly from <b>NEW</b> to <b>FINISHED</b>.</p>
<p>Inasmuch as CIF loops are only incidentally ordered, the sequence in which loop packets are presented by an iterator is not defined by these specifications.</p>
<p>While iteration of a given loop is underway, it is implementation-defined what effect, if any, modifications to that loop other than by the iterator itself (including by a different iterator) have on the iteration results.</p>
<p>An open packet iterator potentially places both hard and soft constraints on use of the CIF with which it is associated. In particular, open iterators may interfere with other accesses to the same underlying data -- even for reading -- and it is undefined how closing or aborting an iterator affects other open iterators. When multiple iterators must be held open at the same time, it is safest (but not guaranteed safe) to close / abort them in reverse order of their creation. Additionally, and secondarily to the preceding, packet iterators should be closed or aborted as soon as they cease to be needed. More specific guidance may be associated with particular API implementations. </p>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga9eb5e98ce0d242782160967a07277041"></a><!-- doxytag: member="cif.h::cif_pktitr_abort" ref="ga9eb5e98ce0d242782160967a07277041" args="(cif_pktitr_tp *iterator)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cif_pktitr_abort </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__datatypes.html#gaf30f6ef79093de027175258a818c178c">cif_pktitr_tp</a> *&nbsp;</td>
          <td class="paramname"> <em>iterator</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>If possible, reverts any changes applied via the provided iterator to its CIF, and, in all cases, releases any resources associated with the iterator itself. </p>
<p>Whether changes can be reverted or rolled back depends on the library implementation.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in,out]</tt>&nbsp;</td><td valign="top"><em>iterator</em>&nbsp;</td><td>a pointer to the packet iterator object to abort; must be a non-NULL pointer to an active iterator</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Returns <code>CIF_OK</code> on success, <code>CIF_NOT_SUPPORTED</code> if aborting is not supported, or an error code (typically <code>CIF_ERROR</code> ) in all other cases </dd></dl>

</div>
</div>
<a class="anchor" id="gac1e81229999fe79c718d9c82b2f27123"></a><!-- doxytag: member="cif.h::cif_pktitr_close" ref="gac1e81229999fe79c718d9c82b2f27123" args="(cif_pktitr_tp *iterator)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cif_pktitr_close </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__datatypes.html#gaf30f6ef79093de027175258a818c178c">cif_pktitr_tp</a> *&nbsp;</td>
          <td class="paramname"> <em>iterator</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Finalizes any changes applied via the specified iterator and releases any resources associated with it. The iterator ceases to be active. </p>
<p>Failure of this function means that changes applied by the iterator could not be made permanent; its resources are released regardless, and it ceases being active.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in,out]</tt>&nbsp;</td><td valign="top"><em>iterator</em>&nbsp;</td><td>a pointer to the iterator to close; must be a non-NULL pointer to an active iterator object</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><code>CIF_OK</code> on success or an error code (typically <code>CIF_ERROR</code> ) on failure </dd></dl>

</div>
</div>
<a class="anchor" id="gad59958923b9731f89c635de17e19afea"></a><!-- doxytag: member="cif.h::cif_pktitr_next_packet" ref="gad59958923b9731f89c635de17e19afea" args="(cif_pktitr_tp *iterator, cif_packet_tp **packet)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cif_pktitr_next_packet </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__datatypes.html#gaf30f6ef79093de027175258a818c178c">cif_pktitr_tp</a> *&nbsp;</td>
          <td class="paramname"> <em>iterator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__datatypes.html#ga1a9b0b1f2abee085ee5d32eb388f2d60">cif_packet_tp</a> **&nbsp;</td>
          <td class="paramname"> <em>packet</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Advances a packet iterator to the next packet, if any, and optionally returns the contents of that packet. </p>
<p>If <code>packet</code> is not NULL then the packet data are recorded where it points, either replacing the contents of a packet provided that way by the caller (when <code>*packet</code> is not NULL) or providing a new packet to the caller. "Replacing the contents" includes removing items that do not belong to the iterated loop. A new packet provided to the caller in this way (when <code>packet</code> is not NULL and <code>*packet</code> is NULL on call) becomes the responsibility of the caller; when no longer needed, its resources should be released via <code><a class="el" href="group__packet__funcs.html#ga4eda991e3e42ef96267e638110dabab3" title="Releases the specified packet and all resources associated with it, including those...">cif_packet_free()</a></code>.</p>
<p>If no more packets are available from the iterator's loop then <code>CIF_FINISHED</code> is returned.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in,out]</tt>&nbsp;</td><td valign="top"><em>iterator</em>&nbsp;</td><td>a pointer to the packet iterator from which the next packet is requested</td></tr>
    <tr><td valign="top"><tt>[in,out]</tt>&nbsp;</td><td valign="top"><em>packet</em>&nbsp;</td><td>if non-NULL, the location where the contents of the next packet should be provided, either as the address of a new packet, or by replacing the contents of an existing one whose address is already recorded there.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>On success returns <code>CIF_OK</code> if the iterator successfully advanced, <code>CIF_FINISHED</code> if there were no more packets available. Returns an error code on failure (typically <code>CIF_ERROR</code> ), in which case the contents of any pre-existing packet provided to the function are undefined (but valid) </dd></dl>

</div>
</div>
<a class="anchor" id="ga0bb801812ca029b5e8b0694b6a3c57ed"></a><!-- doxytag: member="cif.h::cif_pktitr_remove_packet" ref="ga0bb801812ca029b5e8b0694b6a3c57ed" args="(cif_pktitr_tp *iterator)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cif_pktitr_remove_packet </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__datatypes.html#gaf30f6ef79093de027175258a818c178c">cif_pktitr_tp</a> *&nbsp;</td>
          <td class="paramname"> <em>iterator</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Removes the last packet iterated by the specified iterator from its managed loop. </p>
<p>It is an error to pass an iterator to this function for which <code><a class="el" href="group__pktitr__funcs.html#gad59958923b9731f89c635de17e19afea" title="Advances a packet iterator to the next packet, if any, and optionally returns the...">cif_pktitr_next_packet()</a></code> has not been called since it was obtained or since it was most recently passed to <code><a class="el" href="group__pktitr__funcs.html#ga0bb801812ca029b5e8b0694b6a3c57ed" title="Removes the last packet iterated by the specified iterator from its managed loop...">cif_pktitr_remove_packet()</a></code>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in,out]</tt>&nbsp;</td><td valign="top"><em>iterator</em>&nbsp;</td><td>a pointer to the packet iterator object whose most recently provided packet is to be removed</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Returns <code>CIF_OK</code> on success, or else an error code characterizing the nature of the failure, normally one of: <ul>
<li><code>CIF_MISUSE</code> if the iterator has no current packet (because it has not yet provided one, or because the one most recently provided has been removed via this function </li>
<li><code>CIF_ERROR</code> in most other cases </li>
</ul>
</dd></dl>

</div>
</div>
<a class="anchor" id="ga0deabdbb4e3117170d3a7885bd0219f8"></a><!-- doxytag: member="cif.h::cif_pktitr_update_packet" ref="ga0deabdbb4e3117170d3a7885bd0219f8" args="(cif_pktitr_tp *iterator, cif_packet_tp *packet)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cif_pktitr_update_packet </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__datatypes.html#gaf30f6ef79093de027175258a818c178c">cif_pktitr_tp</a> *&nbsp;</td>
          <td class="paramname"> <em>iterator</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__datatypes.html#ga1a9b0b1f2abee085ee5d32eb388f2d60">cif_packet_tp</a> *&nbsp;</td>
          <td class="paramname"> <em>packet</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Updates the last packet iterated by the specified iterator with the values from the provided packet. </p>
<p>It is an error to pass an iterator to this function for which <code><a class="el" href="group__pktitr__funcs.html#gad59958923b9731f89c635de17e19afea" title="Advances a packet iterator to the next packet, if any, and optionally returns the...">cif_pktitr_next_packet()</a></code> has not been called since it was obtained or since it was most recently passed to <code><a class="el" href="group__pktitr__funcs.html#ga0bb801812ca029b5e8b0694b6a3c57ed" title="Removes the last packet iterated by the specified iterator from its managed loop...">cif_pktitr_remove_packet()</a></code>, or to pass one for which <a class="el" href="group__pktitr__funcs.html#gad59958923b9731f89c635de17e19afea" title="Advances a packet iterator to the next packet, if any, and optionally returns the...">cif_pktitr_next_packet()</a> has returned <code>CIF_FINISHED</code>. Items in the iterator's target loop for which the packet does not provide a value are left unchanged. It is an error for the provided packet to provide a value for an item not included in the iterator's loop.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>iterator</em>&nbsp;</td><td>a pointer to the packet iterator defining the loop and packet to update; must be a non-NULL pointer to an active packet iterator</td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>packet</em>&nbsp;</td><td>a pointer to a packet object defining the updates to apply; must not be NULL</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd><code>CIF_OK</code> on success, or else an error code characterizing the nature of the failure, normally one of: <ul>
<li><code>CIF_MISUSE</code> if the iterator has no current packet (because it has not yet provided one, or because the one most recently provided has been removed </li>
<li><code>CIF_WRONG_LOOP</code> if the packet provides an item that does not belong to the iterator's loop </li>
<li><code>CIF_ERROR</code> in most other cases </li>
</ul>
</dd></dl>

</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr/>
<p style="font-size: small">Copyright 2014, 2015 John C. Bollinger</p>

